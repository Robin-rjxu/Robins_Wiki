<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>StrongArm 比较器 | Robin&#39;s Wiki</title><meta name="keywords" content="IC,ADC,comparator"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="关键 StrongARM 锁存器的  基本结构和原理  组成：钟控开关，输入差分对，交叉耦合对 工作过程  4 个工作阶段  预充电 (钟控开关 \(S_1-S_4\)) 放大 (输入差分对 \(M_1,M_2\)) 再生输出  放大：\(M_3,M_4\) 交叉耦合 NMOS 导通 正反馈：\(M_5,M_6\) 交叉耦合 PMOS 导通    各个晶体管的作用  \(M_3,M_4\) 切断静"><meta property="og:type" content="article"><meta property="og:title" content="StrongArm 比较器"><meta property="og:url" content="https://wiki.robin-ic.fun/wiki/19262/index.html"><meta property="og:site_name" content="Robin&#39;s Wiki"><meta property="og:description" content="关键 StrongARM 锁存器的  基本结构和原理  组成：钟控开关，输入差分对，交叉耦合对 工作过程  4 个工作阶段  预充电 (钟控开关 \(S_1-S_4\)) 放大 (输入差分对 \(M_1,M_2\)) 再生输出  放大：\(M_3,M_4\) 交叉耦合 NMOS 导通 正反馈：\(M_5,M_6\) 交叉耦合 PMOS 导通    各个晶体管的作用  \(M_3,M_4\) 切断静"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://i.loli.net/2020/02/27/Wf4mG2Arz1n8Lp3.png"><meta property="og:image" content="https://i.loli.net/2020/02/27/4hVAPcISgRvxHuU.png"><meta property="og:image" content="https://i.loli.net/2020/02/28/MmDN9IYGflZbjQv.png"><meta property="og:image" content="https://i.loli.net/2020/02/28/ysZXlu3K17qABUI.png"><meta property="og:image" content="https://i.loli.net/2020/02/29/kXN4WHxCpjm21vT.png"><meta property="og:image" content="https://i.loli.net/2020/03/01/JLge9ba1uFkExN2.png"><meta property="og:image" content="https://i.loli.net/2020/03/01/K9j2T8Z6ykExR3s.png"><meta property="article:published_time" content="2020-02-17T03:34:38.000Z"><meta property="article:modified_time" content="2020-08-14T08:35:14.026Z"><meta property="article:author" content="Robin-rjxu"><meta property="article:tag" content="IC"><meta property="article:tag" content="ADC"><meta property="article:tag" content="comparator"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://i.loli.net/2020/02/27/Wf4mG2Arz1n8Lp3.png"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="/libs/open-sans/styles.css"><link rel="stylesheet" href="/libs/source-code-pro/styles.css"><link rel="stylesheet" href="/css/style.css"><script src="/libs/jquery/2.1.3/jquery.min.js"></script><script src="/libs/jquery/plugins/cookie/1.4.1/jquery.cookie.js"></script><link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css"><link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><meta name="generator" content="Hexo 5.0.2"><link rel="alternate" href="/atom.xml" title="Robin's Wiki" type="application/atom+xml">
</head><body><div id="container"><header id="header"><div id="header-main" class="header-inner"><div class="outer"><a href="/" id="logo"><i class="logo"></i> <span class="site-title">Robin&#39;s Wiki</span></a><nav id="main-nav"><a class="main-nav-link" href="/">HOME</a> <a class="main-nav-link" href="/archives">ARCHIEVES</a> <a class="main-nav-link" href="/categories">CATEGORIES</a> <a class="main-nav-link" href="/tags">TAGS</a> <a class="main-nav-link" href="/about">ABOUT</a></nav><div id="search-form-wrap"><form class="search-form"><input type="text" class="ins-search-input search-form-input" placeholder="Search"> <button type="submit" class="search-form-submit"></button></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="Type something..."> <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"Posts",PAGES:"Pages",CATEGORIES:"Categories",TAGS:"Tags",UNTITLED:"(Untitled)"},ROOT_URL:"/",CONTENT_URL:"/content.json"}</script><script src="/js/insight.js"></script></div></div></div><div id="main-nav-mobile" class="header-sub header-inner"><table class="menu outer"><tr><td><a class="main-nav-link" href="/">HOME</a></td><td><a class="main-nav-link" href="/archives">ARCHIEVES</a></td><td><a class="main-nav-link" href="/categories">CATEGORIES</a></td><td><a class="main-nav-link" href="/tags">TAGS</a></td><td><a class="main-nav-link" href="/about">ABOUT</a></td><td><div class="search-form"><input type="text" class="ins-search-input search-form-input" placeholder="Search"></div></td></tr></table></div></header><div class="outer"><aside id="sidebar"><div class="widget-wrap" id="categories"><h3 class="widget-title"><span>categories</span> &nbsp; <a id="allExpand" href="#"><i class="fa fa-angle-double-down fa-2x"></i></a></h3><ul class="unstyled" id="tree"><li class="directory"><a href="#" data-role="directory"><i class="fa fa-folder"></i> &nbsp; Basics</a><ul class="unstyled" id="tree"><li class="directory"><a href="#" data-role="directory"><i class="fa fa-folder"></i> &nbsp; Signals and Systems</a><ul class="unstyled" id="tree"><li class="file"><a href="/wiki/20123/">相干采样 Coherent Sampling</a></li><li class="file"><a href="/wiki/30261/">窗口采样 Window Sampling</a></li></ul></li></ul></li><li class="directory open"><a href="#" data-role="directory"><i class="fa fa-folder-open"></i> &nbsp; IC</a><ul class="unstyled" id="tree"><li class="directory open"><a href="#" data-role="directory"><i class="fa fa-folder-open"></i> &nbsp; ADC</a><ul class="unstyled" id="tree"><li class="file"><a href="/wiki/26789/">Triple-Tail Comparator for high speed ADC</a></li><li class="file active"><a href="/wiki/19262/">StrongArm 比较器</a></li><li class="file"><a href="/wiki/36844/">ADC 测试数据处理 ADC Test Data Processing</a></li></ul></li><li class="directory"><a href="#" data-role="directory"><i class="fa fa-folder"></i> &nbsp; Analog</a><ul class="unstyled" id="tree"><li class="file"><a href="/wiki/12155/">SAR ADC 电容误差分析与验证</a></li></ul></li></ul></li><li class="directory"><a href="#" data-role="directory"><i class="fa fa-folder"></i> &nbsp; Tools</a><ul class="unstyled" id="tree"><li class="directory"><a href="#" data-role="directory"><i class="fa fa-folder"></i> &nbsp; Git</a><ul class="unstyled" id="tree"><li class="file"><a href="/wiki/64853/">安装 Git 与使用 Github</a></li></ul></li><li class="directory"><a href="#" data-role="directory"><i class="fa fa-folder"></i> &nbsp; Writing</a><ul class="unstyled" id="tree"><li class="file"><a href="/wiki/8797/">使用 Overleaf 编辑 IEEE 论文</a></li></ul></li></ul></li><li class="directory"><a href="#" data-role="directory"><i class="fa fa-folder"></i> &nbsp; Website</a><ul class="unstyled" id="tree"><li class="file"><a href="/wiki/52045/">安装 Hexo</a></li><li class="file"><a href="/wiki/47926/">使用 Hexo 生成与配置站点</a></li><li class="file"><a href="/wiki/46484/">Hexo 目录与文件简要说明</a></li></ul></li></ul></div><script>$(document).ready(function(){var r="fa-folder-open",i="fa-folder",l="fa-angle-double-down",d="fa-angle-double-up";$(document).on("click",'#categories a[data-role="directory"]',function(a){a.preventDefault();var e=$(this).children(".fa"),s=e.hasClass(r),l=$(this).siblings("ul");e.removeClass(r).removeClass(i),s?(void 0!==l&&l.slideUp({duration:100}),e.addClass(i)):(void 0!==l&&l.slideDown({duration:100}),e.addClass(r))}),$('#categories a[data-role="directory"]').bind("contextmenu",function(a){a.preventDefault();var e=$(this).children(".fa"),s=e.hasClass(r),l=$(this).siblings("ul"),d=$.merge(l.find("li ul"),l),o=$.merge(l.find(".fa"),e);o.removeClass(r).removeClass(i),s?(d.slideUp({duration:100}),o.addClass(i)):(d.slideDown({duration:100}),o.addClass(r))}),$(document).on("click","#allExpand",function(a){a.preventDefault();var e=$(this).children(".fa"),s=e.hasClass(l);e.removeClass(l).removeClass(d),s?($("#sidebar .fa.fa-folder").removeClass("fa-folder").addClass("fa-folder-open"),$("#categories li ul").slideDown({duration:100}),e.addClass(d)):($("#sidebar .fa.fa-folder-open").removeClass("fa-folder-open").addClass("fa-folder"),$("#categories li ul").slideUp({duration:100}),e.addClass(l))})})</script><div id="toTop" class="fa fa-angle-up"></div></aside><section id="main"><article id="post-IC/ADC/StrongArm-comparator" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-inner"><header class="article-header"><div class="article-meta"><div class="article-category"><i class="fa fa-folder"></i> <a class="article-category-link" href="/categories/IC/">IC</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/IC/ADC/">ADC</a></div><div class="article-tag"><i class="fa fa-tag"></i> <a class="tag-link-link" href="/tags/ADC/" rel="tag">ADC</a>, <a class="tag-link-link" href="/tags/IC/" rel="tag">IC</a>, <a class="tag-link-link" href="/tags/comparator/" rel="tag">comparator</a></div><div class="article-date"><i class="fa fa-calendar"></i> <a href="/wiki/19262/"><time datetime="2020-02-17T03:34:38.000Z" itemprop="datePublished">2020-02-17</time></a></div><i class="fa fa-bar-chart"></i> <span id="busuanzi_container_site_pv"><span id="busuanzi_value_page_pv"></span></span><div class="article-meta-button"><a href="https://github.com/Robin-rjxu/Robins_Wiki/raw/write/source/_posts/IC/ADC/StrongArm-comparator.md" rel="external nofollow noopener noreferrer" target="_blank">Source</a></div><div class="article-meta-button"><a href="https://github.com/Robin-rjxu/Robins_Wiki/edit/write/source/_posts/IC/ADC/StrongArm-comparator.md" rel="external nofollow noopener noreferrer" target="_blank">Edit</a></div><div class="article-meta-button"><a href="https://github.com/Robin-rjxu/Robins_Wiki/commits/write/source/_posts/IC/ADC/StrongArm-comparator.md" rel="external nofollow noopener noreferrer" target="_blank">History</a></div></div><h1 class="article-title" itemprop="name">StrongArm 比较器</h1></header><div class="article-entry" itemprop="articleBody"><div id="toc" class="toc-article"><strong class="toc-title">Catalogue</strong><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E9%94%AE"><span class="toc-number">1.</span> <span class="toc-text">关键</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%83%8C%E6%99%AF"><span class="toc-number">2.</span> <span class="toc-text">背景</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">3.</span> <span class="toc-text">概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B7%A5%E4%BD%9C%E8%BF%87%E7%A8%8B"><span class="toc-number">4.</span> <span class="toc-text">工作过程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E6%9E%90%E8%AE%A8%E8%AE%BA"><span class="toc-number">5.</span> <span class="toc-text">分析讨论</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%84%E4%B8%AA%E6%99%B6%E4%BD%93%E7%AE%A1%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">5.1.</span> <span class="toc-text">各个晶体管的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%9E%E7%90%86%E6%83%B3%E6%80%A7%E5%88%86%E6%9E%90"><span class="toc-number">5.2.</span> <span class="toc-text">非理想性分析</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%B1%E8%B0%83-offset"><span class="toc-number">5.2.1.</span> <span class="toc-text">失调 offset</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%B5%E5%99%AA%E5%A3%B0-electronic-noise"><span class="toc-number">5.2.2.</span> <span class="toc-text">电噪声 electronic noise</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%99%AA%E5%A3%B0%E5%88%86%E6%9E%90"><span class="toc-number">5.2.2.1.</span> <span class="toc-text">噪声分析</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%94%81%E5%AD%98%E5%99%A8%E5%99%AA%E5%A3%B0%E4%BB%BF%E7%9C%9F%E6%96%B9%E6%B3%95"><span class="toc-number">5.2.2.2.</span> <span class="toc-text">锁存器噪声仿真方法</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9E%E8%B8%A2%E5%92%8C%E7%94%B5%E6%BA%90%E7%9E%AC%E6%80%81-kickback-and-supply-transients"><span class="toc-number">5.2.3.</span> <span class="toc-text">回踢和电源瞬态 kickback and supply transients</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9B%9E%E8%B8%A2"><span class="toc-number">5.2.3.1.</span> <span class="toc-text">回踢</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%94%B5%E6%BA%90%E7%9E%AC%E6%80%81"><span class="toc-number">5.2.3.2.</span> <span class="toc-text">电源瞬态</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#references"><span class="toc-number">6.</span> <span class="toc-text">References</span></a></li></ol></div><h2 id="关键">关键</h2><p>StrongARM 锁存器的</p><ul><li>基本结构和原理<ul><li>组成：钟控开关，输入差分对，交叉耦合对</li><li>工作过程<ul><li>4 个工作阶段<ul><li>预充电 (钟控开关 <span class="math inline">\(S_1-S_4\)</span>)</li><li>放大 (输入差分对 <span class="math inline">\(M_1,M_2\)</span>)</li><li>再生输出<ul><li>放大：<span class="math inline">\(M_3,M_4\)</span> 交叉耦合 NMOS 导通</li><li>正反馈：<span class="math inline">\(M_5,M_6\)</span> 交叉耦合 PMOS 导通</li></ul></li></ul></li></ul></li><li>各个晶体管的作用<ul><li><span class="math inline">\(M_3,M_4\)</span> 切断静态电流</li><li><span class="math inline">\(M_5,M_6\)</span> 恢复输出高电平</li><li><span class="math inline">\(S_1,S_2\)</span> 清除状态，设置放大模式初始状态</li><li><span class="math inline">\(M_8\)</span> 保证 <span class="math inline">\(P,Q\)</span> 电压相等，避免动态失调</li><li><span class="math inline">\(S_3,S_4\)</span> 预充电</li></ul></li></ul></li><li>非理想性分析<ul><li>失调<ul><li><span class="math inline">\(M_1,M_2\)</span> 贡献主要失调</li><li>其他晶体管对失调的贡献受到输入参考电压增益抑制</li><li>主要失调校正原理：调整 <span class="math inline">\(P,Q\)</span> 的电容，实现不同的放电速率，以补偿随机失调误差</li></ul></li><li>电噪声<ul><li>噪声机制<ul><li><span class="math inline">\(M_1,M_2\)</span> 和 <span class="math inline">\(kT/C\)</span> 贡献主要噪声</li><li>其他晶体管对噪声的贡献受到输入参考电压增益抑制</li></ul></li><li>噪声仿真方法<ul><li>输入小差分电压差</li><li>处于亚稳态条件附近</li><li>统计瞬态仿真输出 0/1 出现的次数</li><li>倒推输入参考噪声的高斯分布方差</li></ul></li></ul></li><li>回踢<ul><li>锁存器工作时从输入汲取电流</li><li>通过电容耦合回输入</li></ul></li><li>电源瞬态<ul><li>锁存器工作时可能从电源汲取峰值较大电流</li></ul></li></ul></li></ul><h2 id="背景">背景</h2><p>StrongARM 锁存器拓扑可广泛用作 Sense Amplifier，比较器，或者作为是具有高灵敏度的锁存器。 "StrongARM" 一词是为了纪念 Digital Equipment Corporation 的 StrongARM 微处理器中使用此电路，但其基本结构最初是由东芝的 Kobayashi 等人介绍的。 StrongARM 锁存器之所以流行，有以下三个原因：</p><ol type="1"><li>零静态功率；</li><li>直接产生轨到轨输出；</li><li>其输入参考失调主要来自一对差分。</li></ol><h2 id="概述">概述</h2><p>Fig.1 (a) 显示了原始的 StrongARM 锁存器，(b) 为其中一种修改，其中的锁存器包括一对钟控的差分对 <span class="math inline">\(M_1 - M_2\)</span>，两个交叉耦合对 <span class="math inline">\(M_3 - M_4\)</span> 和 <span class="math inline">\(M_5 - M_6\)</span>，以及4个预充电开关 <span class="math inline">\(S_1 - S_4\)</span>。</p><figure><img src="https://i.loli.net/2020/02/27/Wf4mG2Arz1n8Lp3.png" alt><figcaption>strongarm_fig1.png</figcaption></figure><h2 id="工作过程">工作过程</h2><p>根据输入 <span class="math inline">\(V_{in1}-V_{in2}\)</span> 的极性，电路在 X 和 Y 节点提供输出轨到轨的输出。我们可以将其工作描述为 4 个阶段。</p><p><strong>第一阶段</strong>， <span class="math inline">\(CK\)</span> 为低；<span class="math inline">\(M_1\)</span> 和 <span class="math inline">\(M_2\)</span> 关断，<span class="math inline">\(P, Q, X, Y\)</span> 被预充电至 <span class="math inline">\(VDD\)</span>，电路可以简化至 Fig.2(a) 所示。</p><p><strong>第二阶段</strong>，<span class="math inline">\(CK\)</span> 变为高，开关 <span class="math inline">\(S_1 - S_4\)</span> 关断，<span class="math inline">\(M_1\)</span> 和 <span class="math inline">\(M_2\)</span> 导通，汲取与 <span class="math inline">\(V_{in1}-V_{in2}\)</span> 成正比的电流。由于 <span class="math inline">\(M_3 - M_6\)</span> 原来为关断，电流从 <span class="math inline">\(C_P\)</span> 和 <span class="math inline">\(C_Q\)</span> 流出，使得 <span class="math inline">\(|V_P-V_Q|\)</span> 升高，并且可能超过 <span class="math inline">\(|V_{in1}-V_{in2}|\)</span>，即这个阶段可以提供电压增益，称之为放大模式，如 Fig.2(b) 所示。因为该阶段尾电流相对恒定，<span class="math inline">\(|V_P-V_Q|\approx(g_{m1,2}|V_{in1}-V_{in2}|/C_{P,Q})t\)</span>，其中 <span class="math inline">\(g_{m1,2}\)</span> 为 <span class="math inline">\(M_1\)</span> 和 <span class="math inline">\(M_2\)</span> 的小信号跨导，<span class="math inline">\(C_{P,Q}=C_P=C_Q\)</span>。</p><p><strong>第三阶段</strong>，随着 <span class="math inline">\(V_P\)</span> 和 <span class="math inline">\(V_Q\)</span> 下降至低于 <span class="math inline">\(V_{DD}-V_{THN}\)</span>，交叉耦合的 NMOS 管导通，<span class="math inline">\(M_1\)</span> 和 <span class="math inline">\(M_2\)</span> 的部分漏电流从 <span class="math inline">\(X,Y\)</span> 流出，如 Fig.2(c) 所示。放大模式的持续时间约为 <span class="math inline">\((C_{P,Q}/I_{CM})V_{THN}\)</span>，其中 <span class="math inline">\(I_{CM}\)</span> 为每个电容中流出的共模电流。此时，电压增益大约为 <span class="math inline">\(A_V \approx \dfrac{g_{m1,2}V_{THN}}{I_{CM}}\)</span>。锁存器在第三阶段的行为可以通过 Fig.2(d) 中的等效电路进行分析。锁存器的再生过程是形式为 <span class="math inline">\(exp(t/\tau_{reg})\)</span> 的自然响应，其中 <span class="math inline">\(\tau_{reg}\)</span> 为再生时间常数，即 <span class="math inline">\(\tau_{reg} = \dfrac{C_{X,Y}}{g_{m3,4}(1-C_{X,Y}/C_{P,Q})}\)</span>。有趣的是，<span class="math inline">\(C_{P}\)</span> 和 <span class="math inline">\(C_{Q}\)</span> 造成的退化，以系数 <span class="math inline">\((1-C_{X,Y}/C_{P,Q})\)</span> 增加了 <span class="math inline">\(\tau_{reg}\)</span>。实际上，由于 <span class="math inline">\(C_{X,Y}\)</span> 包括了比较器后级电路的输入电容，因此会大于 <span class="math inline">\(C_{P,Q}\)</span>，交叉耦合的 NMOS 管在这一阶段只提供较小的退化。</p><p><strong>第四阶段</strong>，输出电压 <span class="math inline">\(V_X, V_Y\)</span> 继续下降直至 <span class="math inline">\(V_{DD}-|V_{THP}|\)</span>，此时 <span class="math inline">\(M_5 , M_6\)</span> 导通，如 Fig.2(e) 所示，交叉耦合管的正反馈使得一个输出回到 <span class="math inline">\(V_{DD}\)</span>，而另一个继续下降到 0。</p><p>StrongARM 锁存器在其中半个时钟的输出是无效的 <span class="math inline">\(V_X=V_Y=V_{DD}\)</span>，为了保证后续的逻辑，需要在其后使用 RS锁存器。</p><p>StrongARM 锁存器的功耗主要来源于节点电容的充放电，大约为 <span class="math inline">\(f_{CK} \cdot (2\cdot C_{P,Q}+C_{X,Y}\cdot V_{DD})\)</span>，其中 <span class="math inline">\(f_{CK}\)</span> 为时钟频率，系数 2 表示 <span class="math inline">\(P,Q\)</span> 两个节点每个周期都会从 <span class="math inline">\(V_{DD}\)</span> 放电至地。</p><figure><img src="https://i.loli.net/2020/02/27/4hVAPcISgRvxHuU.png" alt><figcaption>strongarm_fig2.png</figcaption></figure><h2 id="分析讨论">分析讨论</h2><h3 id="各个晶体管的作用">各个晶体管的作用</h3><ul><li><p><span class="math inline">\(M_3-M_4\)</span> 切断第四阶段结束 <span class="math inline">\(V_{DD}\)</span> 和 地 之间的直流路径，避免静态的漏电流。如 Fig.3 所示，如果没有<span class="math inline">\(M_3\)</span> 和 <span class="math inline">\(M_4\)</span>，假设在共模电压附近 <span class="math inline">\(V_{in1}-V_{in2}=100 mV\)</span>， 当时钟有效时，<span class="math inline">\(V_X\)</span> 下降 <span class="math inline">\(V_Y\)</span> 上升，<span class="math inline">\(M_5\)</span> 关断，但是 <span class="math inline">\(M_6\)</span> 导通，从 <span class="math inline">\(V_{DD}\)</span> 到地存在静态电流。若输入为轨到轨的电压，<span class="math inline">\(|V_{in1}-V_{in2}|=V_{DD}\)</span>，<span class="math inline">\(M_1\)</span> 和 <span class="math inline">\(M_2\)</span> 不会同时导通，则不存在该现象。</p></li><li><p><span class="math inline">\(M_5-M_6\)</span> 主要用于恢复输出节点<span class="math inline">\(X, Y\)</span> 到 <span class="math inline">\(V_{DD}\)</span>，如果没有它们，当 <span class="math inline">\(|V_{in1}-V_{in2}|\)</span> 很小时，共模电压会从 <span class="math inline">\(X\)</span> 或 <span class="math inline">\(Y\)</span> 放电，输出的高电平被衰减。</p></li><li><p>开关 <span class="math inline">\(S_1, S_2\)</span> 主要有两个作用</p><ul><li>清除 <span class="math inline">\(P,Q\)</span> 之前的状态，避免动态失调；</li><li>为各个节点提供初始电压 <span class="math inline">\(V_{DD}\)</span>，使得在 <span class="math inline">\(M_1,M_2\)</span>进入线性区之前提供放大模式。</li></ul></li><li><p>Fig.1(a) 和 Fig.1(b) 的主要区别：是否使 <span class="math inline">\(P,Q\)</span> 电压相等</p><ul><li>预充电结束后，<span class="math inline">\(M_8\)</span> 会关断</li><li>如果没有 <span class="math inline">\(M_8\)</span><ul><li>动态失调会更严重</li><li><span class="math inline">\(V_P\)</span> 和 <span class="math inline">\(V_Q\)</span> 会从 <span class="math inline">\(V_{DD}-V_{THN}\)</span> 开始放电，电路只能提供很小的增益</li><li><span class="math inline">\(M_3-M_4\)</span> 会在增益实现前导通，因此会贡献更多的失调</li></ul></li></ul></li><li><p><span class="math inline">\(S_3-S_4\)</span> 将 <span class="math inline">\(X, Y\)</span> 预充电至 <span class="math inline">\(V_{DD}\)</span>，保证 <span class="math inline">\(M_5-M_6\)</span> 在放大开始之前保持关断，从而减少他们对失调的贡献</p></li></ul><figure><img src="https://i.loli.net/2020/02/28/MmDN9IYGflZbjQv.png" alt><figcaption>strongarm_fig3.png</figcaption></figure><h3 id="非理想性分析">非理想性分析</h3><h4 id="失调-offset">失调 offset</h4><p>当用作 sense amplifier 时，需要 StrongARM 实现足够小的输入等效失调电压。由于 <span class="math inline">\(S_1-S_4\)</span> 实现的预充电保证了在 <span class="math inline">\(M_3-M_6\)</span> 在初始状态下关断，减少了他们对失调的贡献。在一个典型的设计中,<span class="math inline">\(M_3,M_4\)</span> 的失配参考到输入端，除以的系数约为 <span class="math inline">\(A_V\approx 4\)</span>，而 <span class="math inline">\(M_5,M_6\)</span> 的系数约为 10，这样 <span class="math inline">\(M_1,M_2\)</span> 成为失调的主导。</p><p>因为放大模式中，<span class="math inline">\(C_{P,Q}\)</span> 的电荷流动提供了电压增益，因此可以通过制造 <span class="math inline">\(C_P\ne C_Q\)</span> 的不对称消除电路的失调。如 Fig.5 所示，通过在 <span class="math inline">\(P,Q\)</span> 建立不同的放电速率实现失调调整。其中 <span class="math inline">\(P,Q\)</span> 之间的电压差可以写作：</p><p><span class="math display">\[V_P - V_Q = -\dfrac{g_{m1,2}}{2}\cdot \dfrac{C_P+C_Q}{C_P C_Q}(V_{in1}-V_{in2})t+\dfrac{C_P-C_Q}{C_P C_Q}I_{CM}t\]</span></p><p>可见放大模式时，<span class="math inline">\(V_P-V_Q\)</span> 可以累积的电压失调为 <span class="math inline">\((C_P-C_Q)/(C_P C_Q)I_{CM}t\)</span>，用于补偿锁存器的随机失调。当 <span class="math inline">\(V_P,V_Q\)</span> 下降至低于 <span class="math inline">\(V_{DD}-V_{THN}\)</span> 后，放大模式结束，其持续的时间约为 <span class="math inline">\(t\approx V_{THN}(C_P+C_Q)/(2I_{CM}\)</span>，其中 <span class="math inline">\((C_P+C_Q)/2\)</span> 为近似值，因此其贡献的失调为 <span class="math inline">\(V_{THN}(C_P/C_Q-C_Q/C_P)/2\)</span>。</p><p>为了实现失调消除，锁存器的输入端短接在一起，当时钟有效时，锁存器输出寄存器，调整 <span class="math inline">\(C_P,C_Q\)</span> 的值。如果要实现大范围，高精度的失调消除，需要数量较多，取值较小单位电容，造成锁存器工作速度的下降和功耗的提高。</p><figure><img src="https://i.loli.net/2020/02/28/ysZXlu3K17qABUI.png" alt><figcaption>strongarm_fig5.png</figcaption></figure><h4 id="电噪声-electronic-noise">电噪声 electronic noise</h4><h5 id="噪声分析">噪声分析</h5><p>根据前面的失调分析可知，<span class="math inline">\(S_1-S_4\)</span> 的预充电行为也会减少 <span class="math inline">\(M_3-M_6\)</span>的电噪声贡献。主要的输入参考噪声来源于 <span class="math inline">\(M_1-M_2\)</span>，<span class="math inline">\(kT/C\)</span> 噪声则存在于 <span class="math inline">\(S_1-S_2\)</span>，而其他晶体管的噪声只在增益显著增长后才会开始作用。</p><p>在放大模式中，如 Fig.2(b) 所示，该等效电路可以看作一个积分器，输出来自 <span class="math inline">\(M_1-M_2\)</span> 的噪声。这部分噪声的方差随着时间增长： <span class="math display">\[E(V_{PQ}^2)=\dfrac{8kT\gamma g_{m1,2}}{C_{Q,P}^2}t\]</span></p><p>放大模式持续的时间约为 <span class="math inline">\((C_{P,Q}/I_{CM}V_{THN})\)</span>，<span class="math inline">\(M_1-M_2\)</span> 在该模式下最终输出的噪声方差为：</p><p><span class="math display">\[\sigma_{1.2}^2=\dfrac{8kT\gamma}{C_{P,Q}}\cdot\dfrac{g_{m1,2}V_{THN}}{I_{CM}}\]</span></p><p>加上 <span class="math inline">\(S_1-S_2\)</span> 的 <span class="math inline">\(kT/C\)</span> 噪声的贡献，除以电压增益的平方，同时写作 <span class="math inline">\(g_{m1,2} \approx 2I_{CM}/(V_{GS}-V_{THN})_{1,2}\)</span>，则最终该模式下的的输入参考噪声为：</p><p><span class="math display">\[\overline{V_{n,in}^2}=\dfrac{(V_{GS}-V_{THN})_{1,2}}{V_{THN}}\cdot [\dfrac{4kT\gamma}{C_{P,Q}}+\dfrac{(V_{GS}-V_{THN})_{1,2}}{V_{THN}}\cdot \dfrac{kT}{2C_{P,Q}}]\]</span></p><p>方括号中的第一项 <span class="math inline">\(M_1-M_2\)</span> 贡献的噪声，通常比第二项大8倍，其他噪声源的定量分析可以参考文献 [4]。</p><h5 id="锁存器噪声仿真方法">锁存器噪声仿真方法</h5><p>不限于 StrongARM 锁存器，比较器噪声仿真提出了有趣的问题。不同于小信号模拟电路，比较器并不直接提供一个输出噪声和一个输出噪声等效到输入需要除以的增益。简单来说，我们可以将比较器置于亚稳态条件（metastable condition）下进行小信号分析，但应考虑 StrongARM 锁存器的开关切换行为和噪声注入在输出开始变化之前就已经完成了。</p><figure><img src="https://i.loli.net/2020/02/29/kXN4WHxCpjm21vT.png" alt><figcaption>strongarm_fig6.png</figcaption></figure><p>比较器的噪声系统仿真如下，见 Fig.6：</p><ul><li>仿真器设置<ul><li>带有噪声的瞬态仿真</li><li>假设比较器失调和差分输入电压为 0</li><li>给予仿真器多次有效的时钟</li><li>电路中的高斯噪声使得输出最终会从亚稳态中恢复，产生 0/1 输出的概率相等</li></ul></li><li>应用一个小的差分输入 <span class="math inline">\(V_S\)</span>（若干 mV），并重复仿真<ul><li>因为 <span class="math inline">\(V_S\)</span> 影响比较器的决策，“ 1”和“ 0” 出现的概率不相等</li><li>默认情况下，<span class="math inline">\(V_S\)</span> 为正数，输出为 1</li><li>仅当以输入为基准的噪声小于负数 <span class="math inline">\(-V_S\)</span> 时才输出 0</li></ul></li><li>通过大量的时钟周期的仿真结果，推算噪声高斯改论分布<ul><li>预测输出 0 的个数正比于高斯概率分布函数 <span class="math inline">\(f_x(x)\)</span> 从 <span class="math inline">\(-V_S\)</span> 至 <span class="math inline">\(+\infty\)</span> 的面积</li><li>根据仿真中 0/1 出现的次数 <span class="math inline">\(n_0/n_1\)</span>，可以得到 <span class="math display">\[\dfrac{\int_{-\infty}^{-V_S}f_x(x)dx}{1-\int^{-V_S}_{-\infty}f_x(x)dx}=\dfrac{n_0}{n_1}\]</span></li><li>输入参考噪声电压的平方即为 <span class="math inline">\(f_x(x)\)</span> 的方差</li><li><span class="math inline">\(V_S\)</span> 的选择应该满足<ul><li><span class="math inline">\(V_S\)</span> 足够大，使得 <span class="math inline">\(n_0/n_1\)</span> 远离 1</li><li><span class="math inline">\(V_S\)</span> 足够小，避免 <span class="math inline">\(n_0\)</span> 和 <span class="math inline">\(n_1\)</span> 出现的次数过少而不具有统计意义</li></ul></li></ul></li></ul><h4 id="回踢和电源瞬态-kickback-and-supply-transients">回踢和电源瞬态 kickback and supply transients</h4><p>StrongARM 锁存器工作时会从输入和电路汲取较大的瞬态电流。当大量比较器同时工作时，如 flash ADC 中的情况，这会造成较大的问题。</p><h5 id="回踢">回踢</h5><p>如 Fig.7 所示，输入产生的“回踢”电流来自多种机制，同时包括差分和共模分量。前者主要表现为<span class="math inline">\(V_P, V_Q\)</span> 以不相等的速率下降至地，并通过 <span class="math inline">\(C_{GD1},C_{GD2}\)</span>耦合至输入。当 <span class="math inline">\(M_1,M_2\)</span> 进入线性区域，并且其栅极-漏极电容增加时，这种影响变得更加明显。 共模 CM 的反冲噪声电流大得多，并且当 <span class="math inline">\(M_7\)</span> 开启时，开始从 <span class="math inline">\(C_{GS1},C_{GS2}\)</span> 汲取其漏极电流，而当它关闭时，CK 通过 <span class="math inline">\(C_{GD7}(\approx C_{GS7})\)</span> 耦合到 <span class="math inline">\(C_{GS1},C_{GS2}\)</span>。</p><p>通过为输入器件的漏极路径而非源极路径提供时钟，可以降低回踢噪声。如 Fig.8(a) 所示，这种机构使用了 <span class="math inline">\(M_7,M_8\)</span> 来控制锁存器。但是，由于 <span class="math inline">\(M_1,M2\)</span> 在放大模式下工作在线性区，因此降低了回踢噪声，但代价是输入失调较高。通过将 <span class="math inline">\(M_3-M_4\)</span> 和 <span class="math inline">\(M_7-M_8\)</span> 变宽可以避免此问题，但是，如 Fig.8(b) 所示，在预充电模式下，<span class="math inline">\(A\)</span> 或 <span class="math inline">\(B\)</span> 处的缓慢放电会导致 <span class="math inline">\(V_P\)</span> 和 <span class="math inline">\(V_Q\)</span> 较大的动态失调之间明显失衡。</p><figure><img src="https://i.loli.net/2020/03/01/JLge9ba1uFkExN2.png" alt><figcaption>strongarm_fig7.png</figcaption></figure><h5 id="电源瞬态">电源瞬态</h5><p>如 Fig.1(b) 所示，电源瞬态电流源自 <span class="math inline">\(S_1 - S_4\)</span> 的预充电行为。如果 <span class="math inline">\(CK\)</span> 快速下降，<span class="math inline">\(S_1 - S_4\)</span> 中的3个立即进入饱和区（第四个处于线性区域，因为其漏极电压等于 <span class="math inline">\(V_{DD}\)</span>），并且从 <span class="math inline">\(V_{DD}\)</span> 汲取大电流。设计的关键点是，由于电源的阻抗较低，即使是平均功率低的设计，可能仍从电源汲取高峰值的电流流。</p><figure><img src="https://i.loli.net/2020/03/01/K9j2T8Z6ykExR3s.png" alt><figcaption>strongarm_fig8.png</figcaption></figure><h2 id="references">References</h2><blockquote><ul><li><a href="http://ieeexplore.ieee.org/document/7130773/" rel="external nofollow noopener noreferrer" target="_blank">The StrongARM Latch</a></li><li><a href="https://ieeexplore.ieee.org/document/4446769" rel="external nofollow noopener noreferrer" target="_blank">[4] Noise analysis of regenerative comparators for reconfigurable ADC architectures</a></li></ul></blockquote></div><footer class="article-footer"></footer></div></article><nav id="article-nav"><a href="/wiki/64853/" id="article-nav-newer" class="article-nav-link-wrap"><strong class="article-nav-caption">Newer</strong><div class="article-nav-title">安装 Git 与使用 Github</div></a><a href="/wiki/26789/" id="article-nav-older" class="article-nav-link-wrap"><strong class="article-nav-caption">Older</strong><div class="article-nav-title">Triple-Tail Comparator for high speed ADC</div></a></nav><script type="text/javascript">!function(){var e=window.location.href,r=document.referrer;if(!/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi.test(e)){var o="//api.share.baidu.com/s.gif";r?(o+="?r="+encodeURIComponent(document.referrer),e&&(o+="&l="+e)):e&&(o+="?l="+e),(new Image).src=o}}(window)</script></section></div><footer id="footer"><div class="outer"><div id="footer-info" class="inner">Robin-rjxu &copy; 2020 <a rel="external nofollow noopener noreferrer" href="http://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/80x15.png"></a><br>Powered by <a href="http://hexo.io/" target="_blank" rel="external nofollow noopener noreferrer">Hexo</a>. Theme - <a href="https://github.com/zthxxx/hexo-theme-Wikitten" rel="external nofollow noopener noreferrer" target="_blank">wikitten</a><br><span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i> <span id="busuanzi_value_site_pv"></span></span> &nbsp;|&nbsp; <span id="busuanzi_container_site_pv"><i class="fa fa-user"></i> <span id="busuanzi_value_site_uv"></span></span></div></div></footer><script src="/libs/lightgallery/js/lightgallery.min.js"></script><script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script><script src="/libs/lightgallery/js/lg-pager.min.js"></script><script src="/libs/lightgallery/js/lg-autoplay.min.js"></script><script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script><script src="/libs/lightgallery/js/lg-zoom.min.js"></script><script src="/libs/lightgallery/js/lg-hash.min.js"></script><script src="/libs/lightgallery/js/lg-share.min.js"></script><script src="/libs/lightgallery/js/lg-video.min.js"></script><script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true,
            TeX: {
                equationNumbers: {
                  autoNumber: 'AMS'
                }
            }
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });</script><script async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script src="/js/main.js"></script></div></body></html>